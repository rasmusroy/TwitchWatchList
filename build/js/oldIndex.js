"use strict";function channelInfoCall(){chrome.storage.sync.get({storedChannels:[]},function(e){e.storedChannels.map(function(e){var n="",t="offline";fetch(streamURL("streams",e)).then(function(e){return e.json()}).then(function(e){null===e.stream?n="Offline":e.stream.hasOwnProperty("_id")&&(n=e.stream.game,t="online")})}),e.storedChannels.forEach(function(e){var n="Can't find account",t="offline",a="https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/404_user_70x70.png",r=e;fetch(streamURL("streams",e)).then(function(e){return e.json()}).then(function(e){null===e.stream?n="Offline":e.stream.hasOwnProperty("_id")&&(n=e.stream.game,t="online")}).then(function(){return fetch(streamURL("channels",e))}).then(function(e){return e.json()}).then(function(e){null!=e.logo&&(a=e.logo),null!=e.display_name&&(r=e.display_name);var o=e.url,s="online"===t?""+e.status:"",c=e._id,l=document.createElement("div");l.className="channel-element "+t,l.innerHTML='\n              <div class="element-container">\n                <div class="streamer-avatar"> <a href="'+o+'"><img src="'+a+'"></a></div>\n                <div class="streamer-info">\n                  <div class="streamer-name"> <a class="stream-link" href="'+o+'"'+r+'">'+r+'</a> </div>\n                  <div class="streamer-game"> Streaming  <a href="https://www.twitch.tv/directory/game/'+n+'">'+n+'</a> </div>\n                </div>\n                <a class="streamer-title" href="'+o+'">'+s+'</a>\n                <div class="deleteContainer">\n                  <svg class="deleteBtn" id="'+c+'" alt="Delete Channel" width="14px" height="18px" viewBox="0 0 14 18" >\n                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="Core" transform="translate(-299.000000, -129.000000)" fill="#706A7C">\n                            <g id="delete" transform="translate(299.000000, 129.000000)">\n                                <path d="M1,16 C1,17.1 1.9,18 3,18 L11,18 C12.1,18 13,17.1 13,16 L13,4 L1,4 L1,16 L1,16 Z M14,1 L10.5,1 L9.5,0 L4.5,0 L3.5,1 L0,1 L0,3 L14,3 L14,1 L14,1 Z" id="Shape"></path>\n                            </g>\n                        </g>\n                    </g>\n                  </svg>\n                </div>\n              </div>';var i=document.querySelector(".stream-container");"online"===t?i.insertBefore(l,i.firstChild):i.appendChild(l)})})})}function fetchChannelInfo(e){e.map(function(e){console.log(e)})}function streamURL(e,n){return"https://api.twitch.tv/kraken/"+e+"/"+n+"?client_id=gnvnwcw3bqrjx6gjcydm3fkmbgxmga"}function checkForEmptyState(){chrome.storage.sync.get({storedChannels:[]},function(e){e.storedChannels.length>0&&emptyStateFunc()})}function emptyStateFunc(){document.getElementById("empty-state").remove()}document.addEventListener("DOMContentLoaded",function(){channelInfoCall(),checkForEmptyState(),document.getElementById("addChannelBtn").addEventListener("click",function(){var e=document.getElementById("channelNameInput"),n=e.value.toLowerCase();if(!n)return void console.log("Error: No value specified");chrome.storage.sync.get({storedChannels:[]},function(e){var t=void 0;t=e.storedChannels,t.push(n),chrome.storage.sync.set({storedChannels:t},function(){console.log("Settings saved"),location.reload()})})});for(var e=document.querySelectorAll("a"),n=0;n<e.length;n++)anchor=e[n],anchor.addEventListener("click",function(e){return chrome.tabs.create({url:e.target.href}),!1})}),document.addEventListener("DOMSubtreeModified",function(){for(var e=null,n=document.querySelectorAll(".deleteBtn"),t=function(){var e=this.id.toLowerCase();console.log(this),chrome.storage.sync.get({storedChannels:[]},function(n){var t=void 0;t=n.storedChannels;var a=t.indexOf(e);-1!=a&&t.splice(a,1),chrome.storage.sync.set({storedChannels:t},function(){console.log("Settings saved"),location.reload()})})},a=0;a<n.length;a++)e=n[a],e.addEventListener("click",t);for(var r=document.getElementsByTagName("a"),o=0;o<r.length;o++)!function(){var e=r[o],n=e.href;e.onclick=function(){chrome.tabs.create({active:!0,url:n})}}()});